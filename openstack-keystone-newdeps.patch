--- keystone-2012.2/keystone/__init__.py.newdeps	2012-02-29 11:16:06.000000000 +0100
+++ keystone-2012.2/keystone/__init__.py	2012-03-01 22:42:08.546503618 +0100
@@ -0,0 +1,29 @@
+import sys
+import pkg_resources
+
+# If there is a conflicting non egg module,
+# i.e. an older standard system module installed,
+# then replace it with this requirement
+def replace_dist(requirement):
+    try:
+        return pkg_resources.require(requirement)
+    except pkg_resources.VersionConflict:
+        e = sys.exc_info()[1]
+        dist=e.args[0]
+        req=e.args[1]
+        if dist.key == req.key and not dist.location.endswith('.egg'):
+            del pkg_resources.working_set.by_key[dist.key]
+            # We assume there is no need to adjust sys.path
+            # and the associated pkg_resources.working_set.entries
+            return pkg_resources.require(requirement)
+
+replace_dist("WebOb >= 1.0")
+replace_dist("SQLAlchemy >= 0.6.3")
+replace_dist("Routes >= 1.12.3")
+
+replace_dist("PasteDeploy >= 1.5.0")
+# This hack is needed because replace_dist() results in
+# the standard paste module path being at the start of __path__.
+# TODO: See can we get pkg_resources to do the right thing directly
+import paste
+paste.__path__.insert(0, paste.__path__.pop(-1))
--- keystone-2013.2.b1/bin/keystone-all.newdeps	2013-06-24 12:16:30.051458695 +0200
+++ keystone-2013.2.b1/bin/keystone-all	2013-06-24 12:18:38.187956365 +0200
@@ -17,7 +17,6 @@
     sys.path.insert(0, possible_topdir)
 
 
-from paste import deploy
 import pbr.version

 from keystone.common import environment
@@ -26,6 +25,8 @@ from keystone import config
 from keystone.openstack.common import gettextutils
 from keystone.openstack.common import importutils
 
+from paste import deploy
+
 
 CONF = config.CONF
 
